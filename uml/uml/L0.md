flowchart LR

    %% === External Entities ===
    EX1["EX-1 Borrower: Student or Faculty"]:::ext
    EX2["EX-2 University SSO - Login"]:::ext
    EX3["EX-3 Email System"]:::ext
    EX4["EX-4 Librarian (optional)"]:::ext

    %% === Central System Process ===
    P0["P-0 University Library System - Borrow Book Process"]:::proc

    %% === Data Flows ===
    EX1 -->|F-01 Borrow/Reserve Request| P0
    P0 -->|F-02 Outcome / Status Message| EX1
    P0 ---|F-03 Auth Request / Response| EX2
    P0 -->|F-04 Email Confirmation| EX3
    EX4 ---|F-05 Assistance / Override Request| P0

    %% === Style Definitions ===
    classDef ext fill:#fff,border:#555,stroke-width:1px,color:#000;
    classDef proc fill:#e8f5ff,stroke:#2b6cb0,stroke-width:2px,font-weight:bold;
